<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>HTORI ERP – Step 1</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f5f6f8}
  .topbar{
    height:56px;background:#1F3C88;color:#fff;
    display:flex;align-items:center;justify-content:space-between;
    padding:0 12px;position:fixed;left:0;right:0;top:0
  }
  .brand{font-weight:700}
  .layout{display:flex;margin-top:56px}
  .sidebar{
    width:200px;background:#111;color:#fff;min-height:calc(100vh - 56px);
    padding:10px
  }
  .sidebar button{
    width:100%;padding:10px;margin-bottom:6px;border:0;border-radius:6px;
    background:#222;color:#fff;cursor:pointer;text-align:left
  }
  .sidebar button.active{background:#444}
  .content{flex:1;padding:16px}
  .card{background:#fff;border-radius:8px;padding:12px;margin-bottom:12px}
  .muted{color:#666}
</style>

<!-- Firebase (v8 – 단순) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>

<body>

<!-- TOP -->
<div class="topbar">
  <div class="brand">HTORI ERP</div>
  <div class="muted">Step 1</div>
</div>

<!-- LAYOUT -->
<div class="layout">
  <aside class="sidebar">
    <button id="m-dashboard" onclick="show('dashboard')">Dashboard</button>
    <button id="m-purchase" onclick="show('purchase')">Purchase</button>
    <button id="m-stock" onclick="show('stock')">Stock</button>
  </aside>

  <main id="content" class="content"></main>
</div>

<script>
/* ===============================
   Firebase 설정 (당신의 프로젝트)
================================ */
firebase.initializeApp({
  apiKey: "AIzaSyDwiTlPtoXraEtA7TzTctdH6DJS6gdSEGQ",
  authDomain: "htori-erp-3c22b.firebaseapp.com",
  databaseURL: "https://htori-erp-3c22b-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "htori-erp-3c22b"
});
const db = firebase.database();

/* ===============================
   메뉴/페이지
================================ */
function setActive(id){
  document.querySelectorAll(".sidebar button")
    .forEach(b=>b.classList.remove("active"));
  document.getElementById("m-"+id).classList.add("active");
}

function show(page){
  setActive(page);
  if(page==="dashboard") renderDashboard();
  if(page==="purchase") renderPurchase();
  if(page==="stock") renderStock();
}

/* ===============================
   Pages (아직 기능 없음)
================================ */
function renderDashboard(){
  content.innerHTML = `
    <div class="card">
      <h2>Dashboard</h2>
      <p class="muted">Step 1: 화면/메뉴/Firebase 연결 확인</p>
      <button onclick="testFirebase()">Firebase Test</button>
      <div id="fbResult" class="muted"></div>
    </div>
  `;
}

function renderPurchase(){
  content.innerHTML = `
    <div class="card">
      <h2>Purchase</h2>
      <p class="muted">다음 단계에서 입고 기능이 들어옵니다.</p>
    </div>
  `;
}

function renderStock(){
  content.innerHTML = `
    <div class="card">
      <h2>Stock</h2>
      <p class="muted">다음 단계에서 재고 테이블이 들어옵니다.</p>
    </div>
  `;
}

/* ===============================
   Firebase 연결 테스트
================================ */
function testFirebase(){
  const ref = db.ref("test");
  ref.set({ ok:true, at:new Date().toISOString() })
    .then(()=>ref.once("value"))
    .then(snap=>{
      fbResult.innerText =
        "Firebase OK: " + JSON.stringify(snap.val());
    })
    .catch(e=>{
      fbResult.innerText = "Firebase ERROR";
      console.error(e);
    });
}

/* 초기 화면 */
show("dashboard");
</script>
</body>
</html>
