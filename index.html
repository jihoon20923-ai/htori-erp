<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HTORI ERP - Firebase Test</title>
</head>
<body>

<h2>Firebase Connection Test</h2>
<button id="testBtn">Save Test Data</button>
<pre id="result"></pre>

<!-- Firebase SDK -->
<script type="module">
  // ðŸ”¹ Firebase SDK import
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ðŸ”¹ TODO: ì—¬ê¸°ì— ë³¸ì¸ firebaseConfig ë¶™ì´ê¸°
const firebaseConfig = {
  apiKey: "AIzaSyA0hbKamN_6zuDZDj5xhU2m3uqSNqgJwEg",
  authDomain: "htori-erp-core.firebaseapp.com",
  projectId: "htori-erp-core",
  storageBucket: "htori-erp-core.firebasestorage.app",
  messagingSenderId: "891517707878",
  appId: "1:891517707878:web:78fb2a4d2a80a2f0716fa7",
  measurementId: "G-FB32BFH6MT"
};

  // ðŸ”¹ Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const result = document.getElementById("result");

  document.getElementById("testBtn").onclick = async () => {
    try {
      // 1ï¸âƒ£ Firestoreì— ë°ì´í„° ì €ìž¥
      await addDoc(collection(db, "test"), {
        message: "Firebase connected",
        createdAt: new Date().toISOString()
      });

      // 2ï¸âƒ£ Firestore ë°ì´í„° ì½ê¸°
      const snapshot = await getDocs(collection(db, "test"));
      let output = "Saved documents:\n";

      snapshot.forEach(doc => {
        output += JSON.stringify(doc.data()) + "\n";
      });

      result.textContent = output;
      console.log("Firebase OK");

    } catch (e) {
      console.error(e);
      result.textContent = "ERROR: " + e.message;
    }
  };
</script>

</body>
</html>
